<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>4x2 Track Label</title>
  <style>
    :root {
      font-family: "Inter", "Segoe UI", Arial, sans-serif;
      color: #131313;
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 24px;
      background: #f4f6f8;
    }
    .controls {
      display: flex;
      gap: 14px;
      flex-wrap: wrap;
      align-items: center;
      font-size: 0.9rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      margin-bottom: 20px;
    }
    .controls label {
      font-weight: 600;
    }
    .controls input[type="range"] {
      width: 240px;
    }
    .controls output {
      font-weight: 700;
      min-width: 3ch;
      text-align: center;
    }
    button {
      border: none;
      background: #111;
      color: #fff;
      padding: 6px 16px;
      border-radius: 4px;
      cursor: pointer;
      letter-spacing: 0.08em;
    }
    .sheet {
      display: flex;
      flex-wrap: wrap;
      gap: 18px;
    }
    .label {
      width: 4in;
      height: 2in;
      padding: 0;
      background: #fff;
      position: relative;
      overflow: hidden;
    }
    .label::after {
      content: "";
      position: absolute;
      inset: 0;
      border: 2px solid #000;
      pointer-events: none;
    }
    .label-inner {
      height: 100%;
      padding: 0.12in;
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 0.08in;
      position: relative;
      z-index: 1;
    }
    .label-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
    }
    .label-header h1 {
      margin: 0;
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }
    .label-header span {
      font-size: 0.85rem;
      font-weight: 600;
    }
    .label-body {
      display: grid;
      grid-template-columns: 1.1in 1fr;
      gap: 0.12in;
      align-items: stretch;
    }
    .datamatrix {
      width: 100%;
      height: auto;
      border: 1px solid #000;
    }
    .datamatrix rect {
      fill: #000;
    }
    .specs {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 4px;
      font-size: 0.7rem;
      text-transform: uppercase;
    }
    .specs div {
      border-bottom: 1px solid #000;
      padding-bottom: 2px;
    }
    .car-card {
      border-left: 2px dashed #000;
      padding-left: 0.1in;
      display: flex;
      align-items: center;
    }
    .car-graphic {
      width: 100%;
      height: 100%;
    }
    .footer-line {
      display: flex;
      justify-content: space-between;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
    }
    @media print {
      body {
        background: #fff;
        padding: 0;
        margin: 0;
      }
      .controls {
        display: none;
      }
      .sheet {
        gap: 8px;
      }
    }
  </style>
</head>
<body>
  <div class="controls">
    <label for="quantity">Labels to print</label>
    <input type="range" id="quantity" min="1" max="100" value="1" />
    <output id="quantityDisplay">1</output>
    <button id="printButton" type="button">Print</button>
  </div>
  <div id="labelSheet" class="sheet" aria-live="polite"></div>

  <script>
    const quantityInput = document.getElementById("quantity");
    const quantityDisplay = document.getElementById("quantityDisplay");
    const sheet = document.getElementById("labelSheet");

    const dataMatrixPattern = [
      [1,1,1,1,1,1,1,1,1,1,1,1],
      [1,0,0,0,0,1,0,1,0,0,0,1],
      [1,1,0,1,0,0,1,0,1,0,1,1],
      [1,0,1,0,1,0,0,0,0,1,0,1],
      [1,1,0,0,0,1,1,0,1,0,0,1],
      [1,0,0,1,0,0,0,1,0,1,0,1],
      [1,0,1,0,1,0,1,0,0,0,1,1],
      [1,0,0,0,0,1,0,1,0,0,0,1],
      [1,1,0,1,0,0,1,0,1,0,1,1],
      [1,0,1,0,1,0,0,0,0,1,0,1],
      [1,0,0,0,0,1,0,1,0,0,0,1],
      [1,1,1,1,1,1,1,1,1,1,1,1]
    ];

    function createDataMatrix(pattern, cell) {
      let rects = "";
      pattern.forEach((row, r) => {
        row.forEach((value, c) => {
          if (value) {
            rects += `<rect x="${c * cell}" y="${r * cell}" width="${cell}" height="${cell}"></rect>`;
          }
        });
      });
      const width = pattern[0].length * cell;
      const height = pattern.length * cell;
      return `<svg class="datamatrix" viewBox="0 0 ${width} ${height}" role="img" aria-label="Track batch code">${rects}</svg>`;
    }

    function carGraphic() {
      return `
        <svg class="car-graphic" viewBox="0 0 220 90" role="img" aria-label="Car art">
          <defs>
            <linearGradient id="body" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#ff6b00"></stop>
              <stop offset="100%" stop-color="#f80"></stop>
            </linearGradient>
          </defs>
          <rect x="8" y="30" width="204" height="32" rx="12" fill="url(#body)"></rect>
          <path d="M28 30 L60 12 H150 L188 30 Z" fill="#ff9b0d"></path>
          <circle cx="60" cy="70" r="14" fill="#111"></circle>
          <circle cx="60" cy="70" r="8" fill="#e4e7eb"></circle>
          <circle cx="164" cy="70" r="14" fill="#111"></circle>
          <circle cx="164" cy="70" r="8" fill="#e4e7eb"></circle>
          <rect x="70" y="20" width="60" height="14" rx="4" fill="#1f1f1f"></rect>
          <rect x="88" y="24" width="24" height="10" fill="#6fd7ff"></rect>
        </svg>
      `;
    }

    function renderLabel(sequence) {
      const datamatrix = createDataMatrix(dataMatrixPattern, 8);
      return `
        <article class="label" aria-label="Hot Wheels Autobahn label ${sequence}">
          <div class="label-inner">
            <div class="label-header">
              <h1>Hot Wheels Autobahn</h1>
              <span>Line K${sequence.toString().padStart(2, "0")}</span>
            </div>
            <div class="label-body">
              <section>
                ${datamatrix}
                <div class="specs">
                  <div>Batch <strong>HW-AB-${240 + sequence}</strong></div>
                  <div>Torque <strong>62 Nm</strong></div>
                  <div>Finish <strong>Burnt Orange</strong></div>
                  <div>QC <strong>PASS</strong></div>
                </div>
              </section>
              <section class="car-card">
                ${carGraphic()}
              </section>
            </div>
            <div class="footer-line">
              <span>Gate Slot ${sequence % 8 + 1}</span>
              <span>Ready 05:30</span>
            </div>
          </div>
        </article>
      `;
    }

    function renderLabels() {
      const count = Number(quantityInput.value);
      quantityDisplay.textContent = quantityInput.value;
      const labels = Array.from({ length: count }, (_, idx) => renderLabel(idx + 1));
      sheet.innerHTML = labels.join("");
    }

    quantityInput.addEventListener("input", renderLabels);

    document.getElementById("printButton").addEventListener("click", () => window.print());

    renderLabels();
  </script>
</body>
</html>
